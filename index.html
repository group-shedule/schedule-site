<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12EPS | –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(function(OneSignal) {
        OneSignal.init({
          appId: "b4a0253c-5239-4270-834e-1479ecbdcfe8", // <--- –ù–ï –ó–ê–ë–£–î–¨ ID
          notifyButton: { enable: true, size: 'medium', theme: 'default', position: 'bottom-right' }
        });
      });
    </script>
</head>
<body>

    <div id="loader" class="loader-overlay">
        <div class="loader-content">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>
    </div>

    <div class="app-container">
        <header>
            <div class="logo">12EPS</div>
            <div class="date-widget">
                <button class="nav-arrow" onclick="changeDate(-1)">‚ùÆ</button>
                <div class="date-display">
                    <span id="human-day">...</span>
                    <input type="date" id="date-picker">
                    <small id="human-full-date">...</small>
                </div>
                <button class="nav-arrow" onclick="changeDate(1)">‚ùØ</button>
            </div>
        </header>

        <main>
            <!-- –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ -->
            <div id="admin-panel" class="admin-panel hidden">
                <div class="admin-header">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                <div class="admin-actions">
                    <button onclick="openAddModal()" class="btn-icon">‚ûï –ü–∞—Ä—É</button>
                    <button id="notify-btn" onclick="sendNotification()" class="btn-icon alert">üì¢ –£–≤–µ–¥–æ–º–∏—Ç—å</button>
                </div>
                <div class="template-controls">
                    <div class="template-row">
                        <!-- –ö–ù–û–ü–ö–ê –°–û–•–†–ê–ù–ï–ù–ò–Ø –ù–ï–î–ï–õ–ò -->
                        <button onclick="saveCurrentWeekAsTemplate()" class="btn-small">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ù–ï–î–ï–õ–Æ –∫–∞–∫ —à–∞–±–ª–æ–Ω</button>
                        <button onclick="openTemplateModal()" class="btn-small">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
                    </div>
                </div>
            </div>

            <div id="schedule-list" class="schedule-grid"></div>

            <div id="empty-msg" class="empty-state hidden">
                <div class="empty-icon">üèñÔ∏è</div>
                <p>–ù–∞ —ç—Ç–æ—Ç –¥–µ–Ω—å –ø–∞—Ä –Ω–µ—Ç</p>
            </div>
        </main>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ò -->
    <div id="modal" class="modal-overlay hidden">
        <div class="modal-card">
            <div class="modal-header">
                <h2 id="modal-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</h2>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            <div id="modal-body" class="modal-body"></div>
            <div id="gallery-controls" class="gallery-container hidden">
                <div class="gallery-viewer">
                    <button class="gallery-nav prev" onclick="prevSlide()">‚ùÆ</button>
                    <div class="image-wrapper">
                        <img id="gallery-img" src="" alt="–õ–µ–∫—Ü–∏—è">
                        <div id="photo-actions" class="photo-actions hidden">
                            <button onclick="rotateCurrentPhoto()" title="–ü–æ–≤–µ—Ä–Ω—É—Ç—å">‚Üª</button>
                            <button onclick="deleteCurrentPhoto()" title="–£–¥–∞–ª–∏—Ç—å" class="del">üóëÔ∏è</button>
                        </div>
                    </div>
                    <button class="gallery-nav next" onclick="nextSlide()">‚ùØ</button>
                </div>
                <div class="gallery-info">–°–ª–∞–π–¥ <span id="current-page">1</span> / <span id="total-pages">1</span></div>
            </div>
        </div>
    </div>

    <div id="template-modal" class="modal-overlay hidden">
        <div class="modal-card small">
            <div class="modal-header"><h2>–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω</h2><span class="close-btn" onclick="closeTemplateModal()">&times;</span></div>
            <div id="templates-list" class="templates-list"><p>–ó–∞–≥—Ä—É–∑–∫–∞...</p></div>
        </div>
    </div>

    <div id="add-modal" class="modal-overlay hidden">
        <div class="modal-card small">
            <div class="modal-header"><h2>–ù–æ–≤–∞—è –ø–∞—Ä–∞</h2><span class="close-btn" onclick="closeAddModal()">&times;</span></div>
            <form id="add-form" onsubmit="submitNewPair(event)" class="modern-form">
                <div class="form-row">
                    <input type="time" id="new-start" required><span>‚Äî</span><input type="time" id="new-end" required>
                </div>
                <input type="text" id="new-subject" placeholder="–ü—Ä–µ–¥–º–µ—Ç" required>
                <input type="text" id="new-teacher" placeholder="–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å">
                <button type="submit" class="btn-primary full-width">–°–æ–∑–¥–∞—Ç—å</button>
            </form>
        </div>
    </div>

    <button id="admin-login-btn" class="fab-settings">‚öôÔ∏è</button>
    <script src="script.js?v=3333"></script>
</body>
</html>
